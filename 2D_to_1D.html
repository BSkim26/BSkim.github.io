<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <link rel="stylesheet" href="ANN/css/bootstrap.min.css">                <!--온라인 소스 가져오지 않도록 수정-->
    <link rel="stylesheet" href="ANN/css/font.css" >
    <link type="text/css" rel="stylesheet" href="ANN/css/text.css">
    <title>CNN 2D->1D</title>

</head>
<body>
 
    <div class="container-fluid">
        <div class="row">
            <div class="nn-picker">
                <div class="card">
                    <div class="card-header">
                        <a class="pull-right" data-toggle="collapse" href="#collapsable" role="button">Open/Fold</a>

                    </div>
                    <div class="tab-content collapse show" id="collapsable">
                        <div class="tab-pane fade show active" id="FCNN" role="tabpanel">
                            <h4>CNN 2D->1D Architecture</h4>

                            <hr>
                            <div id="architecture">

                                <div class="row entry">
                                    <span class="input-group mb-2 mr-sm-2 col-4">
                                        행 : <input type="number" id="inputNumber" placeholder="Enter a number"></button>
                                        열 : <input type="number" id="inputNumber2" placeholder="Enter a number"><button onclick="createBoxes_1()">Create Boxes</button>
                                    </span>
                                    <div class="range">
                                    <input type="range" class="form-control col-4" name="betweenNodesInLayer" min="0" max="100" step="1" value="20" style="position: relative; top: -4px;"> <!--없애면 양식 깨짐-->
                                    </div>
                                </div>
                                
                                </div>

                            </div>

                            <hr>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <style>
      svg {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        }
        .container {
          display: flex;
          align-items: center;
          justify-content: space-evenly;
        }
        .box {
        width: 50px;
        height: 50px;
        margin: 5px;
        background-color: white;
        border: 3px solid black;
        float:left;
        }
        .box2 {
          width: 50px;
          height: 50px;
          margin: 5px;
          background-color: white;
        border: 3px solid black;
          flex:1;
        }
        
      </style>


      <div class="container">
       
        <div id="boxes"></div>
        <div id="boxes2"></div>
      </div>

      <div id="svgContainer"></div>

      <script>
    function createBoxes_1() {
    svg = document.querySelector("svg");
    if (svg) {
      svg.parentNode.removeChild(svg);
    }
    createBoxes();
    }


    function createBoxes() {
    let inputNumber = document.getElementById("inputNumber").value;
    let inputNumber2 = document.getElementById("inputNumber2").value;
    let boxes = document.getElementById("boxes");
    let boxes2 = document.getElementById("boxes2");
    let svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");

    
    // Remove any existing boxes
    while (boxes.firstChild) {
      boxes.removeChild(boxes.firstChild);
    }
    while (boxes2.firstChild) {
      boxes2.removeChild(boxes2.firstChild);
    }

    // Create nxn boxes
    for (let i = 0; i < inputNumber; i++) {
      for (let j = 0; j < inputNumber2; j++) {
        let box = document.createElement("div");
        box.classList.add("box");
        box.id = "box_" + i + "_" + j;
        boxes.appendChild(box);
      }
      let breakLine = document.createElement("br");
      boxes.appendChild(breakLine);
    }

    // Create 2n boxes
    for (let i = 0; i < inputNumber*inputNumber2; i++) {
        let box = document.createElement("div");
        box.classList.add("box2");
            box.id = "box2_" + i;
        boxes2.appendChild(box);
    }

    // Create and add lines to svg element
    for (let i = 0; i < inputNumber; i++) {
      for (let j = 0; j < inputNumber2; j++) {
        let box = document.getElementById("box_" + i + "_" + j);
        let box2 = document.getElementById("box2_" + (i*inputNumber2 + j));
        let line = document.createElementNS("http://www.w3.org/2000/svg", "line");
        line.setAttribute("x1", box.offsetLeft + box.offsetWidth/2);
        line.setAttribute("y1", box.offsetTop + box.offsetHeight/2);
        line.setAttribute("x2", box2.offsetLeft + box2.offsetWidth/2);
        line.setAttribute("y2", box2.offsetTop + box2.offsetHeight/2);
        line.style.stroke = "black";
        line.style.strokeWidth = "2px";
        svg.appendChild(line);
      }
    }

    // Add svg element to body
     document.getElementById("svgContainer").appendChild(svg);
  }

      window.onresize = function() {
    svg = document.querySelector("svg");
    if (svg) {
      svg.parentNode.removeChild(svg);
    }
    createBoxes();
}

    </script>

</body>

</html>